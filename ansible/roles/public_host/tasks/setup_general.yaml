---
# TODO: Try setting up Python 3 instead of the default 2

#- name: 'Enable EPEL repository'
#  ansible.builtin.dnf:
#    name:
#      - 'epel-release'
#    state: 'installed'

- name: 'Setup Yarn 1 repository'
  ansible.builtin.yum_repository:
    baseurl:     'https://dl.yarnpkg.com/rpm/'
    description: 'Yarn Repository'
    enabled:     '1'
    gpgcheck:    '1'
    gpgkey:      'https://dl.yarnpkg.com/rpm/pubkey.gpg'
    name:        'yarn'

- name: 'Install required packages'
  ansible.builtin.dnf:
    name:
      - '@nodejs:18/common'
      - 'git'
      - 'yarn'
      - 'vim'
      - 'python3-pip'
      - 'augeas-libs'
      - 'python3-requests'
    state: 'installed'

- name: 'Disable SELinux'
  ansible.builtin.lineinfile:
    line:  'SELINUX=disabled'
    path:  '/etc/selinux/config'
    regex: '^SELINUX='
  notify:
    - 'Reload system'

- name: 'Setup hostname'
  ansible.builtin.hostname:
    name: '{{ fqdn }}'
    use:  'systemd'
