{# TODO: Cache? #}

var MAKER_IDS_MAP = null;
var VISIBLE_SPECIES = null;
var TOTAL_ARTISANS_COUNT = null;
var FILTERS_DATA = null;

window.loadFuzzrakeData = function () {
    MAKER_IDS_MAP = { {# TODO: Remove necessity for maker IDs map https://github.com/veelkoov/fuzzrake/issues/180 #}
        {% for old, new in makerIdsMap %}
            '{{ old }}': '{{ new }}',
        {% endfor %}
    };

    VISIBLE_SPECIES = {
        {% macro species_json(species) %}
            {%- for specie in species -%}
                {%- if not specie.hidden -%}
                    '{{ specie.name }}': {
                        {{ _self.species_json(specie.children) }}
                    },
                {%- endif -%}
            {%- endfor -%}
        {% endmacro %}

        {{ _self.species_json(species) }}
    };

    FILTERS_DATA = {{ filters|json_encode|raw }};

    TOTAL_ARTISANS_COUNT = {{ stats.totalArtisansCount }};
};
